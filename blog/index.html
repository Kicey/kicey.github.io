
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kicey.github.io/blog/">
      
      
      
        <link rel="next" href="archive/2025/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../feed_rss_updated.xml">
      
      <link rel="icon" href="../images/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Hi, Blogs here! - kicey's blog</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <meta name="google-site-verification" content="DaC7Ld_kS4qO1e4AxtoweuGG-EHZ7dTyKh2B-aPQokc" />
  

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hi-blogs-here" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="kicey&#39;s blog" class="md-header__button md-logo" aria-label="kicey's blog" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kicey's blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hi, Blogs here!
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../java/java%20%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/" class="md-tabs__link">
          
  
  
    
  
  Java

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../react/4.%20funcion%20style%20component/" class="md-tabs__link">
          
  
  
    
  
  React

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../kernel/debug_kernel_with_buildroot_qemu/" class="md-tabs__link">
          
  
  
    
  
  Kernel

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../redis/simple_dynamic_string/" class="md-tabs__link">
          
  
  
    
  
  Redis

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="kicey&#39;s blog" class="md-nav__button md-logo" aria-label="kicey's blog" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    kicey's blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java/java%20%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内存布局
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java/Hotspot%20GC%20%E7%89%B9%E6%80%A7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hotspot GC 特性
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    React
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            React
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react/4.%20funcion%20style%20component/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function Style Component
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kernel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Kernel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel/debug_kernel_with_buildroot_qemu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 buildroot 和 QEMU 调试 linux 内核
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Redis
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Redis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis/simple_dynamic_string/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Dynamic String
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="hi-blogs-here">Hi, Blogs here!</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-29 00:00:00+00:00">June 29, 2025</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/">Installing NVIDIA Driver CUDA Toolkit on Ubuntu for Newer GPUs (e.g. 5060 Ti)</a></h2>
<p>Hello everyone! If you've recently upgraded to a newer NVIDIA GPU, like the powerful 5060 Ti, and are running Ubuntu 24.04 or later, you might have run into issues installing the latest drivers and CUDA Toolkit directly from the standard Ubuntu repositories. This is often because newer hardware requires more up-to-date drivers than what's typically available in the default package sources.</p>
<p>This blog post will guide you through the process of installing the NVIDIA driver (specifically version 575 or newer) and CUDA Toolkit (version 12.8 or newer) by utilizing the official NVIDIA-maintained repositories. This method ensures you get the latest compatible software and allows for easier future updates.</p>
<hr />
<h3 id="1-prerequisites-and-system-preparation"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#1-prerequisites-and-system-preparation">1. Prerequisites and System Preparation</a></h3>
<p>Before we begin, ensure your system is up to date and you have the necessary tools.</p>
<ul>
<li>Operating System: Ubuntu 24.04 LTS (or newer)</li>
<li>GPU: NVIDIA 5060 Ti (or similar recently released NVIDIA GPU requiring newer drivers)</li>
<li>Internet Connection: Required for downloading packages.</li>
</ul>
<p>It's highly recommended to back up your system before proceeding with major driver installations.</p>
<p>First, update your package lists and upgrade any existing packages:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</span></code></pre></div>
<p>You might also want to ensure you have the necessary kernel headers and necessary packages for build is  installed, as they are crucial for driver compilation:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>gcc
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>make
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>linux-headers-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>-y
</span></code></pre></div>
<hr />
<h3 id="2-adding-the-official-nvidia-repository"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#2-adding-the-official-nvidia-repository">2. Adding the Official NVIDIA Repository</a></h3>
<p>The key to installing newer drivers is to add the official NVIDIA repository to your system's APT sources. This repository provides the latest drivers and CUDA Toolkit versions directly from NVIDIA.</p>
<p>Just follow this nvidia official link <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network">CUDA Toolkit for ubuntu</a> <code>https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network</code></p>
<p>After adding the repository, update your package list again to fetch the new package information:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>wget<span class="w"> </span>https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>cuda-keyring_1.1-1_all.deb
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span></code></pre></div>
<hr />
<h3 id="3-installing-the-nvidia-driver-and-cuda-toolkit"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#3-installing-the-nvidia-driver-and-cuda-toolkit">3. Installing the NVIDIA Driver and cuda toolkit</a></h3>
<p>Now that the NVIDIA repository is configured, you can install the recommended driver. For your 655060 Ti, a driver version of at least 575 is required.</p>
<h4 id="installing-the-cuda-toolkit"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#installing-the-cuda-toolkit">Installing the cuda-toolkit</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>cuda-toolkit-12-9
</span></code></pre></div>
<p>May you don't want so recent version of cuda-toolkit. The least cuda-tookit version supporting 50 series gpu is 12.8.</p>
<h4 id="installing-the-driver"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#installing-the-driver">Installing the driver</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-open
</span></code></pre></div>
<p>The <code>cuda-drivers</code> is also OK. But the the open source one <code>nvidia-open</code> is recommended.</p>
<p>During the installation, you may noticed here is something like
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Building<span class="w"> </span>initial<span class="w"> </span>module<span class="w"> </span>nvidia/575.57.08<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">6</span>.8.0-62-generic
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Sign<span class="w"> </span>command:<span class="w"> </span>/usr/bin/kmodsign
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Signing<span class="w"> </span>key:<span class="w"> </span>/var/lib/shim-signed/mok/MOK.priv
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Public<span class="w"> </span>certificate<span class="w"> </span><span class="o">(</span>MOK<span class="o">)</span>:<span class="w"> </span>/var/lib/shim-signed/mok/MOK.der
</span></code></pre></div></p>
<p>If you enable secure boot, you should enroll the public certificate. If secure boot is disabled on your host, you can ignore the output while installation and skip the 4th section.</p>
<hr />
<h3 id="4-addressing-secure-boot-and-mok-management"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#4-addressing-secure-boot-and-mok-management">4. Addressing Secure Boot and MOK Management</a></h3>
<p>If Secure Boot is enabled on your system, the NVIDIA kernel modules, which are signed with NVIDIA's public key, will not be loaded automatically by default. You will need to enroll this public key into your system's Machine Owner Key (MOK) list.</p>
<ol>
<li>Use command to import the nvidia public certificate
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>mokutil<span class="w"> </span>--import<span class="w"> </span>/var/lib/shim-signed/mok/MOK.der
</span></code></pre></div></li>
</ol>
<p>You will be prompted to enter password 2 or 3 times. Decided by if you are prompted to enter the password for <code>sudo</code> at first. The last two password is for secure-boot and the ensurement the password(prompted to enter the same password again).</p>
<ol>
<li>
<p>MOK Management Screen: Upon rebooting, your system will likely boot into a "MOK management" or "Secure Boot Key Management" screen (this is part of your UEFI/BIOS, not Ubuntu itself).</p>
</li>
<li>
<p>Enroll MOK: Navigate through the options to "Enroll MOK", then "continue". You will then be prompted to enter the password you set just now. This step officially registers NVIDIA's public key with your Secure Boot system.</p>
</li>
<li>
<p>Continue Boot: After successfully enrolling the key, choose to continue booting your system.</p>
</li>
</ol>
<hr />
<h3 id="5-add-the-cuda-toolkit-binary-to-path"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#5-add-the-cuda-toolkit-binary-to-path">5. Add the CUDA Toolkit Binary to Path</a></h3>
<p>We've install the cuda toolkit in the 3rd step. But the some executable binaries are not in the path. So, you can only access them by the absolute path.</p>
<p>After installation, it's good practice to add CUDA to your system's <code>PATH</code> and <code>LD_LIBRARY_PATH</code>. You can do this by adding the following lines to your <code>~/.bashrc</code> (or <code>~/.zshrc</code> if you use Zsh) and then sourcing the file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=/usr/local/cuda-12/bin$:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc<span class="w"> </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export LD_LIBRARY_PATH=/usr/local/cuda-12/lib64:$LD_LIBRARY_PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.bashrc
</span></code></pre></div>
<p>Verify your installation by checking <code>nvcc --version</code>:</p>
<p>You should see something like:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>nvcc:<span class="w"> </span>NVIDIA<span class="w"> </span><span class="o">(</span>R<span class="o">)</span><span class="w"> </span>Cuda<span class="w"> </span>compiler<span class="w"> </span>driver
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Copyright<span class="w"> </span><span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">2005</span>-2025<span class="w"> </span>NVIDIA<span class="w"> </span>Corporation
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Built<span class="w"> </span>on<span class="w"> </span>Tue_May_27_02:21:03_PDT_2025
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Cuda<span class="w"> </span>compilation<span class="w"> </span>tools,<span class="w"> </span>release<span class="w"> </span><span class="m">12</span>.9,<span class="w"> </span>V12.9.86
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Build<span class="w"> </span>cuda_12.9.r12.9/compiler.36037853_0
</span></code></pre></div></p>
<hr />
<h3 id="6-setting-up-docker-with-gpu-support-nvidia-container-toolkit"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#6-setting-up-docker-with-gpu-support-nvidia-container-toolkit">6. Setting Up Docker with GPU Support (NVIDIA Container Toolkit)</a></h3>
<p>For developers using Docker, you'll want to enable your containers to access the GPU. This requires the NVIDIA Container Toolkit. Fortunately, since you've already added the NVIDIA repository, installing it is straightforward.</p>
<ol>
<li>
<p>Install the NVIDIA Container Toolkit: 
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nvidia-container-toolkit
</span></code></pre></div></p>
</li>
<li>
<p>Configure Docker to Use NVIDIA Runtime: You need to tell Docker to use <code>nvidia</code> as its default runtime for GPU-enabled containers. And restart docker to make it work. This involves modifying Docker's daemon configuration.
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>nvidia-ctk<span class="w"> </span>runtime<span class="w"> </span>configure<span class="w"> </span>--runtime<span class="o">=</span>docker
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</span></code></pre></div></p>
</li>
</ol>
<p>You will say something like this in your <code>/etc/docker/daemon.json</code></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span><span class="w">    </span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w"> </span><span class="nt">&quot;runtimes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">        </span><span class="nt">&quot;nvidia&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">            </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">            </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nvidia-container-runtime&quot;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Test Your Docker GPU Setup: You can test your setup by running a simple CUDA-enabled Docker image:
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:12.8.0-base-ubuntu24.04<span class="w"> </span>nvidia-smi
</span></code></pre></div></li>
</ol>
<p>You should see the output of <code>nvidia-smi</code> from inside the Docker container, indicating successful GPU access.</p>
<p><img alt="image-20250629113600207" src="images/install_nvidia_driver_for_5060ti_on_ubuntu/image-20250629113600207.png" /></p>
<hr />
<h3 id="7-conclusion"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#7-conclusion">7. Conclusion</a></h3>
<p>By following these steps, you should have successfully installed the latest NVIDIA driver and CUDA Toolkit on your Ubuntu system, enabling your newer GPU for development and computation. You've also set up Docker to seamlessly leverage your GPU within containers.</p>
<h3 id="references"><a class="toclink" href="2025/06/29/installing-nvidia-driver-cuda-toolkit-on-ubuntu-for-newer-gpus-eg-5060-ti/#references">References</a></h3>
<ul>
<li>https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network</li>
<li>https://forums.developer.nvidia.com/t/we-would-like-to-know-when-the-nvidia-drivers-for-5060ti-on-ubuntu-will-be-released/331207</li>
<li>https://forums.developer.nvidia.com/t/nvidia-drivers-not-working-while-secure-boot-is-enabled-after-updating-to-ubuntu-24-04/305351/6?u=kiceyscream</li>
<li>https://forums.developer.nvidia.com/t/could-not-select-device-driver-with-capabilities-gpu/80200</li>
<li>https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-29 00:00:00+00:00">June 29, 2025</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="ubuntu-5060-ti-nvidia-cuda-toolkit"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/">在 Ubuntu 上为新一代显卡（如 5060 Ti）安装 NVIDIA 驱动和 CUDA Toolkit</a></h2>
<p>大家好！如果你最近升级到了新一代 NVIDIA 显卡（如强大的 5060 Ti），并且正在运行 Ubuntu 24.04 或更高版本，你可能会发现直接从标准 Ubuntu 软件源安装最新驱动和 CUDA Toolkit 时遇到问题。这通常是因为新硬件需要比默认软件源中更为新颖的驱动程序。</p>
<p>本文将指导你如何通过添加 NVIDIA 官方维护的软件源，安装 NVIDIA 驱动（建议 575 及以上版本）和 CUDA Toolkit（建议 12.8 及以上版本）。这种方式可以确保你获得最新兼容的软件，并便于后续升级。</p>
<hr />
<h3 id="1"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#1">1. 前置条件与系统准备</a></h3>
<p>在开始之前，请确保你的系统已更新，并具备必要的工具。</p>
<ul>
<li>操作系统：Ubuntu 24.04 LTS（或更高）</li>
<li>显卡：NVIDIA 5060 Ti（或类似新发布的 NVIDIA 显卡）</li>
<li>网络连接：需要联网下载软件包</li>
</ul>
<p>强烈建议在进行重大驱动安装前备份系统。</p>
<p>首先，更新你的软件包列表并升级现有软件包：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</span></code></pre></div>
<p>你还需要确保已安装内核头文件和必要的构建工具，这对于驱动编译至关重要：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>gcc
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>make
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>linux-headers-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>-y
</span></code></pre></div>
<hr />
<h3 id="2-nvidia"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#2-nvidia">2. 添加 NVIDIA 官方软件源</a></h3>
<p>安装新驱动的关键在于将 NVIDIA 官方软件源添加到系统的 APT 源中。该源提供了最新的驱动和 CUDA Toolkit。</p>
<p>请参考 NVIDIA 官方链接 <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network">CUDA Toolkit for ubuntu</a> <code>https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network</code></p>
<p>添加软件源后，再次更新软件包列表以获取新信息：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>wget<span class="w"> </span>https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>cuda-keyring_1.1-1_all.deb
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span></code></pre></div>
<hr />
<h3 id="3-nvidia-cuda-toolkit"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#3-nvidia-cuda-toolkit">3. 安装 NVIDIA 驱动和 CUDA Toolkit</a></h3>
<p>现在已经配置好 NVIDIA 软件源，可以安装推荐的驱动了。对于 5060 Ti，建议驱动版本至少为 575。</p>
<h4 id="cuda-toolkit"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#cuda-toolkit">安装 CUDA Toolkit</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>cuda-toolkit-12-9
</span></code></pre></div>
<p>如果你不需要这么新的 CUDA Toolkit，支持 50 系列显卡的最低版本是 12.8。</p>
<h4 id="_1"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#_1">安装驱动</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-open
</span></code></pre></div>
<p><code>cuda-drivers</code> 也是可以的，但推荐使用开源的 <code>nvidia-open</code>。</p>
<p>安装过程中，你可能会看到如下信息：
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Building<span class="w"> </span>initial<span class="w"> </span>module<span class="w"> </span>nvidia/575.57.08<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">6</span>.8.0-62-generic
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Sign<span class="w"> </span>command:<span class="w"> </span>/usr/bin/kmodsign
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Signing<span class="w"> </span>key:<span class="w"> </span>/var/lib/shim-signed/mok/MOK.priv
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Public<span class="w"> </span>certificate<span class="w"> </span><span class="o">(</span>MOK<span class="o">)</span>:<span class="w"> </span>/var/lib/shim-signed/mok/MOK.der
</span></code></pre></div></p>
<p>如果你启用了安全启动（Secure Boot），需要注册公钥。如果主机未启用安全启动，可以忽略此输出并跳过第 4 节。</p>
<hr />
<h3 id="4-mok"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#4-mok">4. 处理安全启动与 MOK 管理</a></h3>
<p>如果系统启用了 Secure Boot，NVIDIA 内核模块默认不会被自动加载。你需要将 NVIDIA 的公钥注册到系统的 MOK（Machine Owner Key）列表。</p>
<ol>
<li>使用命令导入 NVIDIA 公钥：
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>mokutil<span class="w"> </span>--import<span class="w"> </span>/var/lib/shim-signed/mok/MOK.der
</span></code></pre></div></li>
</ol>
<p>你会被要求输入密码 2~3 次，最后两次是为 Secure Boot 设置和确认密码。</p>
<ol>
<li>
<p>重启后，系统会进入 "MOK 管理" 或 "安全启动密钥管理" 界面（属于 UEFI/BIOS）。</p>
</li>
<li>
<p>选择 "Enroll MOK"，然后 "continue"，输入刚才设置的密码，完成公钥注册。</p>
</li>
<li>
<p>注册完成后，选择继续启动系统。</p>
</li>
</ol>
<hr />
<h3 id="5-cuda-toolkit-path"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#5-cuda-toolkit-path">5. 添加 CUDA Toolkit 可执行文件到 PATH</a></h3>
<p>我们在第 3 步已经安装了 CUDA Toolkit，但有些可执行文件默认不在 PATH 中，需要手动添加。</p>
<p>安装后，建议将 CUDA 路径加入系统的 <code>PATH</code> 和 <code>LD_LIBRARY_PATH</code>。可以将以下内容添加到 <code>~/.bashrc</code>（或 Zsh 用户的 <code>~/.zshrc</code>），然后执行 source：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=/usr/local/cuda-12/bin:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc<span class="w"> </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export LD_LIBRARY_PATH=/usr/local/cuda-12/lib64:$LD_LIBRARY_PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc<span class="w"> </span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</span></code></pre></div>
<p>通过 <code>nvcc --version</code> 验证安装：</p>
<p>你应该能看到类似如下输出：
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>nvcc:<span class="w"> </span>NVIDIA<span class="w"> </span><span class="o">(</span>R<span class="o">)</span><span class="w"> </span>Cuda<span class="w"> </span>compiler<span class="w"> </span>driver
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Copyright<span class="w"> </span><span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">2005</span>-2025<span class="w"> </span>NVIDIA<span class="w"> </span>Corporation
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Built<span class="w"> </span>on<span class="w"> </span>Tue_May_27_02:21:03_PDT_2025
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Cuda<span class="w"> </span>compilation<span class="w"> </span>tools,<span class="w"> </span>release<span class="w"> </span><span class="m">12</span>.9,<span class="w"> </span>V12.9.86
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Build<span class="w"> </span>cuda_12.9.r12.9/compiler.36037853_0
</span></code></pre></div></p>
<hr />
<h3 id="6-gpu-dockernvidia-container-toolkit"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#6-gpu-dockernvidia-container-toolkit">6. 配置支持 GPU 的 Docker（NVIDIA Container Toolkit）</a></h3>
<p>如果你使用 Docker 进行开发，需要让容器访问 GPU。这需要安装 NVIDIA Container Toolkit。由于我们已经添加了 NVIDIA 软件源，安装非常简单。</p>
<ol>
<li>
<p>安装 NVIDIA Container Toolkit：
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nvidia-container-toolkit
</span></code></pre></div></p>
</li>
<li>
<p>配置 Docker 使用 NVIDIA 运行时，并重启 Docker 服务：
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>nvidia-ctk<span class="w"> </span>runtime<span class="w"> </span>configure<span class="w"> </span>--runtime<span class="o">=</span>docker
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</span></code></pre></div></p>
</li>
</ol>
<p>你会在 <code>/etc/docker/daemon.json</code> 看到类似如下内容：</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span><span class="w"> </span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="nt">&quot;runtimes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">        </span><span class="nt">&quot;nvidia&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">            </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">            </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nvidia-container-runtime&quot;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>测试 Docker GPU 支持：
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:12.8.0-base-ubuntu24.04<span class="w"> </span>nvidia-smi
</span></code></pre></div></li>
</ol>
<p>你应该能看到容器内 <code>nvidia-smi</code> 的输出，说明 GPU 可用。</p>
<p><img alt="image-20250629113600207" src="images/install_nvidia_driver_for_5060ti_on_ubuntu/image-20250629113600207.png" /></p>
<hr />
<h3 id="7"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#7">7. 总结</a></h3>
<p>通过以上步骤，你应该已经在 Ubuntu 系统上成功安装了最新的 NVIDIA 驱动和 CUDA Toolkit，并让新一代显卡可以用于开发和计算。同时也配置好了 Docker 支持 GPU。</p>
<h3 id="_2"><a class="toclink" href="2025/06/29/%E5%9C%A8-ubuntu-%E4%B8%8A%E4%B8%BA%E6%96%B0%E4%B8%80%E4%BB%A3%E6%98%BE%E5%8D%A1%E5%A6%82-5060-ti%E5%AE%89%E8%A3%85-nvidia-%E9%A9%B1%E5%8A%A8%E5%92%8C-cuda-toolkit/#_2">参考资料</a></h3>
<ul>
<li>https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network</li>
<li>https://forums.developer.nvidia.com/t/we-would-like-to-know-when-the-nvidia-drivers-for-5060ti-on-ubuntu-will-be-released/331207</li>
<li>https://forums.developer.nvidia.com/t/nvidia-drivers-not-working-while-secure-boot-is-enabled-after-updating-to-ubuntu-24-04/305351/6?u=kiceyscream</li>
<li>https://forums.developer.nvidia.com/t/could-not-select-device-driver-with-capabilities-gpu/80200</li>
<li>https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-04 00:00:00+00:00">June 4, 2025</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="fix-the-electron-fiddle-issue-about-user-namespace-privileges-on-ubuntu-2404"><a class="toclink" href="2025/06/04/fix-the-electron-fiddle-issue-about-user-namespace-privileges-on-ubuntu-2404/">Fix the Electron Fiddle issue about user namespace privileges on ubuntu 24.04</a></h2>
<p>If you install Electron Fiddle on Ubuntu 24.04. Then want to run a Fiddle, you will get errors like 
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>The SUID sandbox helper binary was found, but is not configured correctly. Rather than run without sandboxing I&#39;m aborting now. You need to make sure that /home/aadcg/.config/Electron Fiddle/electron-bin/current/chrome-sandbox is owned by root and has mode 4755.
</span></code></pre></div>
or </p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>LaunchProcess: failed to execvp:
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>/home/kicey/.config/Electron
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>[62772:0524/190051.235193:FATAL:zygote_host_impl_linux.cc(211)] Check failed: . : Invalid argument (22) 
</span></code></pre></div>
<p>This is because Ubuntu has changed the Ubuntu 24.04 kernel so that programs like electron are not allowed to create a new user namespace unless they are given an AppArmor profile that contains the userns permission.</p>
<p>To fix this, you need to grant the privilege to the executable by create an apparmor profile. Execute the following commands (maybe <code>sudo</code> needed):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;abi &lt;abi/4.0&gt;,</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="s1">include &lt;tunables/global&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="s1">profile fiddle-electron /home/&#39;</span><span class="nv">$USER</span><span class="s1">&#39;/.config/Electron\ Fiddle/electron-bin/current/electron flags=(unconfined) {</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="s1">    userns,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="s1">}&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/apparmor.d/fiddle-electron
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>apparmor_parser<span class="w"> </span>-r<span class="w"> </span>/etc/apparmor.d/fiddle-electron
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>systemctl<span class="w"> </span>reload<span class="w"> </span>apparmor
</span></code></pre></div>
<p>For mote information, you can refer to the <a href="https://github.com/electron/fiddle/issues/1598">electron/fiddle SIGTRAP error on Ubuntu #1598</a></p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.path", "navigation.indexes", "navigation.top", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>